{% extends "orders/base.html" %}
{% block title %}My Orders · Food Delivery{% endblock %}

{% block content %}
<div class="glass-card p-4 p-md-5">
    <div class="page-header mb-4 d-flex justify-content-between align-items-center">
        <div>
            <h1 class="h3 mb-1">My Orders</h1>
            <small>Track your recent activity and reorder faster.</small>
        </div>
    </div>

    {% if orders %}
    <div class="list-group list-group-flush">
        {% for order in orders %}
        <div
            class="list-group-item bg-transparent text-light border-secondary d-flex justify-content-between align-items-start py-3">
            <div>
                <div class="mb-1">
                    <span class="fw-semibold">Order #{{ order.id }}</span>
                    ·
                    <span class="text-muted">{{ order.created_at|date:"d M Y · h:i A" }}</span>
                </div>
                <div class="text-muted mb-1">
                    {{ order.restaurant.name }}
                </div>
                <div class="small">
                    {% for item in order.items.all %}
                    {{ item.menu_item.name }} × {{ item.quantity }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </div>
            </div>

            <div class="text-end">
                <div class="fw-semibold mb-1">₹ {{ order.total_amount }}</div>
                <span class="badge rounded-pill
                            {% if order.status == 'DELIVERED' %}
                                text-bg-success
                            {% elif order.status == 'OUT_FOR_DELIVERY' %}
                                text-bg-info
                            {% elif order.status == 'CANCELLED' %}
                                text-bg-danger
                            {% else %}
                                text-bg-secondary
                            {% endif %}
                        ">
                    {{ order.status|title }}
                </span>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-muted mb-0">
        You have no orders yet. Start by exploring
        <a href="{% url 'restaurant_list' %}" class="link-light text-decoration-underline">restaurants</a>.
    </p>
    {% endif %}
</div>
{% endblock %}